/* --- åŸºæœ¬ãƒªã‚»ãƒƒãƒˆ --- */
body, html {
    margin: 0;
    padding: 0;
    font-family: sans-serif;
    height: 100%;
    overflow: hidden; 
    background-color: #f4f7f6;
}

/* --- 1. å·¦å³åˆ†å‰²ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ (Flexbox) --- */
#app-container {
    display: flex;
    height: 100vh; /* ç”»é¢ã„ã£ã±ã„ã«åºƒã’ã‚‹ */
}

/* å·¦å´: ãƒãƒ£ãƒƒãƒˆã‚¨ãƒªã‚¢ */
#chat-area {
    flex: 1; 
    display: flex;
    flex-direction: column; 
    border-right: 1px solid #ddd;
    background-color: #ffffff;
}

/* å³å´: ãƒ¬ãƒãƒ¼ãƒˆã‚¨ãƒªã‚¢ */
#report-area {
    flex: 1; 
    display: flex;
    flex-direction: column;
    padding: 20px;
    background-color: #fcfcfc;
}

/* --- 2. ãƒãƒ£ãƒƒãƒˆã‚¨ãƒªã‚¢ã®æ§‹é€  --- */
#chat-history {
    flex-grow: 1; 
    overflow-y: auto; 
    padding: 15px;
}

/* ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒãƒ–ãƒ«ã®å…±é€šã‚¹ã‚¿ã‚¤ãƒ« */
.user-message, .ai-message {
    max-width: 80%; 
    padding: 10px 15px;
    margin-bottom: 10px;
    border-radius: 18px; 
    line-height: 1.5;
    word-wrap: break-word; 
}

/* AIã®ç™ºè¨€ã‚¹ã‚¿ã‚¤ãƒ« (å·¦å¯„ã›ã€ç°è‰²) */
.ai-message {
    margin-right: auto; 
    background-color: #e5e5ea;
    color: #000;
}

/* ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç™ºè¨€ã‚¹ã‚¿ã‚¤ãƒ« (å³å¯„ã›ã€ç·‘ç³») */
.user-message {
    margin-left: auto; 
    background-color: #c5e5c7; 
    color: #000; 
}

/* --- æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«è¡¨ç¤ºã‚¨ãƒªã‚¢ (å…±é€š) --- */
#attached-files {
    /* çµ¶å¯¾ä½ç½®æŒ‡å®šã§å…¥åŠ›ã‚¨ãƒªã‚¢ã®ä¸Šéƒ¨ã«é…ç½® */
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    
    padding: 5px 10px;
    background-color: #f7fff7; 
    border-bottom: 1px solid #e0ffe0;
    
    display: flex;
    flex-wrap: wrap; 
    gap: 8px; 
    z-index: 10;
    
    display: none; 
}

/* --- ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒƒãƒ— (å…±é€š) --- */
.file-chip {
    display: flex;
    align-items: center;
    
    padding: 4px 8px;
    background-color: #e0ffe0; 
    border-radius: 12px;
    
    font-size: 13px;
    color: #333;
}

.file-chip-name {
    max-width: 120px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-right: 5px;
}

.remove-file-button {
    background: none;
    border: none;
    color: #666;
    cursor: pointer;
    font-size: 14px;
    line-height: 1;
    padding: 0 0 0 5px;
}

.remove-file-button:hover {
    color: #c00;
}

/* --- å…¥åŠ›æ¬„ã¨ãƒœã‚¿ãƒ³ã®é…ç½® --- */
#input-area {
    display: flex;
    padding: 40px 15px 15px 10px;
    border-top: 1px solid #eee;
    background-color: #ffffff;
    position: relative; 
}

/* â˜…â˜…â˜… ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ (å·¦ä¸‹) ã®ã‚¹ã‚¿ã‚¤ãƒ« â˜…â˜…â˜… */
#file-upload-container {
    position: absolute;
    left: 15px; 
    bottom: 28px; 
    z-index: 10;
}

#upload-button {
    background-color: transparent; 
    border: none; 
    color: #666; 
    cursor: pointer;
    font-size: 1.5em; 
    line-height: 0.8; 
    height: 35px; 
    width: 35px;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: color 0.2s; 
}

#upload-button:hover {
    background-color: transparent;
    color: #000; 
}

#user-input {
    flex-grow: 1;
    min-height: 50px;
    padding: 10px 55px 10px 45px; 
    margin-right: 0; 
    resize: none; 
    border: 1px solid #ccc;
    border-radius: 8px;
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
}

/* â˜…â˜…â˜… é€ä¿¡ãƒœã‚¿ãƒ³ (å³ä¸‹) ã®ã‚¹ã‚¿ã‚¤ãƒ« â˜…â˜…â˜… */
#send-button {
    position: absolute;
    right: 20px; 
    bottom: 28px; 
    background-color: #000; 
    color: #fff; 
    border: none;
    cursor: pointer;
    font-size: 1.5em; 
    height: 35px; 
    width: 35px;
    padding: 0;
    border-radius: 50%; 
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10; 
    transition: background-color 0.2s;
}

#send-button:hover {
    background-color: #333; 
}


/* --- 3. ãƒ¬ãƒãƒ¼ãƒˆã‚¨ãƒªã‚¢ã®æ§‹é€  --- */
#report-display {
    flex-grow: 1;
    overflow-y: auto; 
    padding: 10px;
    background-color: #f0f0f0; 
    border-radius: 5px;
    margin-bottom: 10px;
}

#report-footer {
    display: flex;
    justify-content: space-between; 
    align-items: center;
    padding: 10px 0; 
}

#download-box {
    display: flex;
    align-items: center;
}

#report-filename {
    font-size: 14px;
    color: #666;
    margin-right: 10px;
}

#download-button {
    background-color: #007bff;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
}

#download-button:hover {
    background-color: #0056b3;
}

#char-count {
    padding: 5px 10px;
    border: 1px solid #ccc;
    border-radius: 3px;
    font-size: 14px;
}

/* --- ãƒ¢ãƒ¼ãƒ‰é¸æŠãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« (å…±é€š) --- */
#mode-selector {
    padding: 10px;
    text-align: center;
    border-bottom: 1px solid #eee;
    background-color: #f9f9f9;
}

#mode-selector label {
    margin: 0 10px;
    cursor: pointer;
}

#mode-selector input[type="radio"] {
    margin-right: 5px;
}


/* ================================================= */
/* ============= ğŸ“± ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³å‘ã‘CSS (ä¿®æ­£æ¸ˆã¿) ============= */
/* ================================================= */

@media (max-width: 768px) {
    /* ç”»é¢å…¨ä½“ */
    #app-container {
        /* å·¦å³åˆ†å‰²ã‹ã‚‰ä¸Šä¸‹åˆ†å‰²ã¸å¤‰æ›´ */
        flex-direction: column;
        height: 100vh;
        overflow-y: auto; /* å…¨ç”»é¢ã‚’ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½ã«ã™ã‚‹ */
    }

    /* ãƒãƒ£ãƒƒãƒˆã‚¨ãƒªã‚¢ (ä¸ŠåŠåˆ†) */
    #chat-area {
        /* é«˜ã•å›ºå®šã‚’å¤–ã—ã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„é‡ã¨ç”»é¢ã‚µã‚¤ã‚ºã«å¿œã˜ã¦æŸ”è»Ÿã«èª¿æ•´ */
        flex-shrink: 0; 
        min-height: 250px; 
        height: auto;
        max-height: 50vh; /* ç”»é¢åŠåˆ†ã‚ˆã‚Šã¯å¤§ãããªã‚‰ãªã„ã‚ˆã†ã«ä¸Šé™ã‚’è¨­å®š */
        border-right: none;
        border-bottom: 5px solid #000; 
    }
    
    /* ãƒãƒ£ãƒƒãƒˆå±¥æ­´ */
    #chat-history {
        padding: 10px;
    }

    /* å…¥åŠ›ã‚¨ãƒªã‚¢ */
    #input-area {
        padding: 40px 10px 10px 5px; 
    }

    /* ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›æ¬„ */
    #user-input {
        padding: 10px 50px 10px 40px; 
        min-height: 40px;
    }

    /* ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚³ãƒ³ãƒ†ãƒŠ */
    #file-upload-container {
        left: 10px; 
        bottom: 18px; 
    }
    
    #file-hint {
        /* ã‚¹ãƒãƒ›ã§ã¯ã‚¹ãƒšãƒ¼ã‚¹ãŒå°‘ãªã„ãŸã‚ãƒ’ãƒ³ãƒˆã‚’éè¡¨ç¤ºã«ã™ã‚‹ */
        display: none !important;
    }
    
    #upload-button {
        height: 40px; 
        width: 40px;
    }

    /* é€ä¿¡ãƒœã‚¿ãƒ³ */
    #send-button {
        right: 10px;
        bottom: 18px; 
        height: 40px; 
        width: 40px;
        font-size: 1.8em;
    }

    /* ãƒ¬ãƒãƒ¼ãƒˆã‚¨ãƒªã‚¢ (ä¸‹åŠåˆ†) */
    #report-area {
        /* æ®‹ã‚Šã®ã‚¹ãƒšãƒ¼ã‚¹ã‚’åŸ‹ã‚ã¤ã¤ã€æœ€å°é«˜ã•ã‚’ç¢ºä¿ */
        flex: 1; 
        min-height: 300px;
        padding: 10px;
    }

    /* ãƒ¬ãƒãƒ¼ãƒˆè¡¨ç¤ºã‚¨ãƒªã‚¢ */
    #report-display {
        padding: 5px;
        margin-bottom: 5px;
        font-size: 14px;
    }
    
    /* ãƒ¬ãƒãƒ¼ãƒˆãƒ•ãƒƒã‚¿ãƒ¼ (è¦‹åˆ‡ã‚Œé˜²æ­¢ã®ä¿®æ­£) */
    #report-footer {
        /* æ¨ªä¸¦ã³ã‹ã‚‰ç¸¦ä¸¦ã³ã«å¤‰æ›´ */
        flex-direction: column; 
        /* å·¦å¯„ã›ã«æˆ»ã™ */
        align-items: flex-start; 
        padding: 5px 0 0 0;
    }
    
    #download-box {
        /* ãƒ•ãƒƒã‚¿ãƒ¼ã®å…¨å¹…ã‚’ä½¿ã† */
        width: 100%; 
        /* ãƒ•ã‚¡ã‚¤ãƒ«åã¨ãƒœã‚¿ãƒ³ã‚’å·¦å³ã«é…ç½® */
        justify-content: space-between;
        margin-bottom: 8px; 
    }

    #char-count {
        /* å³å¯„ã›ã«ã™ã‚‹ */
        align-self: flex-end; 
        padding: 3px 8px;
        font-size: 13px;
    }
    
    /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒƒãƒ—ã®èª¿æ•´ */
    .file-chip-name {
        max-width: 80px; 
    }
    
    /* ãƒ¢ãƒ¼ãƒ‰ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã®èª¿æ•´ */
    #mode-selector label {
        margin: 0 5px;
        font-size: 14px;
    }
}